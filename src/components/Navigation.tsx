import CartContext from 'contexts/Cart/CartContext';
import { useVirtualKeyboardVisible } from 'hooks';
import compact from 'lodash/compact';
import sumBy from 'lodash/sumBy';
import React, { FC, useContext, useEffect, useMemo, useState } from 'react';
import { useLocation, useNavigate } from 'react-router';
import { paths, routes } from 'routes/routeConfig';
import { MenuItem } from 'types/menu';
import { BottomNavigation } from 'zmp-ui';
const tabs: Record<string, MenuItem> = {
    [paths.Shop]: {
        label: 'Trang chủ',
        icon: (
            <svg
                width='24px'
                height='24px'
                viewBox='0 0 24 24'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
            >
                <path
                    d='M9 10C9 10.5523 8.55229 11 8 11C7.44772 11 7 10.5523 7 10C7 9.44771 7.44772 9 8 9C8.55229 9 9 9.44771 9 10Z'
                    fill='#919EAB'
                />
                <path
                    d='M16 11C16.5523 11 17 10.5523 17 10C17 9.44771 16.5523 9 16 9C15.4477 9 15 9.44771 15 10C15 10.5523 15.4477 11 16 11Z'
                    fill='#919EAB'
                />
                <path
                    fillRule='evenodd'
                    clipRule='evenodd'
                    d='M7.10303 6H7C7 3.23858 9.23858 1 12 1C14.7614 1 17 3.23858 17 6H16.897C17.4001 6.00005 17.8362 6.0015 18.1983 6.03158C18.6002 6.06495 18.9997 6.13867 19.3829 6.33776C19.9309 6.62239 20.3776 7.06915 20.6622 7.61708C20.8613 8.00034 20.935 8.39981 20.9684 8.8017C21 9.18235 21 9.64473 21 10.1807V13.6035C21 14.7055 21 15.5945 20.9403 16.3138C20.8788 17.0547 20.7487 17.7049 20.4371 18.3049C19.9627 19.2181 19.2181 19.9627 18.3049 20.4371C17.7049 20.7487 17.0547 20.8788 16.3138 20.9403C15.5944 21 14.7056 21 13.6036 21H10.3964C9.29441 21 8.40556 21 7.68616 20.9403C6.94535 20.8788 6.29514 20.7487 5.69513 20.4371C4.78191 19.9627 4.03731 19.2181 3.56293 18.3049C3.25126 17.7049 3.12125 17.0547 3.05973 16.3138C2.99998 15.5944 2.99999 14.7056 3 13.6035L3 10.1808C2.99998 9.64478 2.99997 9.18237 3.03158 8.8017C3.06495 8.39981 3.13867 8.00034 3.33776 7.61708C3.62239 7.06915 4.06915 6.62239 4.61708 6.33776C5.00035 6.13867 5.39982 6.06495 5.8017 6.03158C6.16384 6.0015 6.59995 6.00005 7.10303 6ZM9 6C9 4.34315 10.3431 3 12 3C13.6569 3 15 4.34315 15 6H9ZM5.53903 8.11259C5.58924 8.0865 5.69125 8.04763 5.96722 8.02472C6.25517 8.0008 6.63373 8 7.22 8H16.78C17.3663 8 17.7448 8.0008 18.0328 8.02472C18.3088 8.04763 18.4108 8.0865 18.461 8.11259C18.6436 8.20746 18.7925 8.35638 18.8874 8.53903C18.9135 8.58924 18.9524 8.69125 18.9753 8.96722C18.9992 9.25517 19 9.63372 19 10.22V13.56C19 14.7158 18.9992 15.5214 18.9471 16.1483C18.8961 16.7632 18.8009 17.116 18.6622 17.3829C18.3776 17.9309 17.9309 18.3776 17.3829 18.6622C17.116 18.8009 16.7632 18.8961 16.1483 18.9471C15.5214 18.9992 14.7158 19 13.56 19H10.44C9.28424 19 8.47856 18.9992 7.85169 18.9471C7.23678 18.8961 6.88403 18.8009 6.61708 18.6622C6.06915 18.3776 5.62239 17.9309 5.33776 17.3829C5.19909 17.116 5.10393 16.7632 5.05286 16.1483C5.00081 15.5214 5 14.7158 5 13.56V10.22C5 9.63372 5.00081 9.25517 5.02472 8.96722C5.04764 8.69125 5.08651 8.58924 5.11259 8.53903C5.20746 8.35638 5.35638 8.20746 5.53903 8.11259Z'
                    fill='#919EAB'
                />
            </svg>
        ),
        activeIcon: (
            <svg
                width='24px'
                height='24px'
                viewBox='0 0 24 24'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
            >
                <path
                    d='M9 10C9 10.5523 8.55229 11 8 11C7.44772 11 7 10.5523 7 10C7 9.44771 7.44772 9 8 9C8.55229 9 9 9.44771 9 10Z'
                    fill='#186F65'
                />
                <path
                    d='M16 11C16.5523 11 17 10.5523 17 10C17 9.44771 16.5523 9 16 9C15.4477 9 15 9.44771 15 10C15 10.5523 15.4477 11 16 11Z'
                    fill='#186F65'
                />
                <path
                    fillRule='evenodd'
                    clipRule='evenodd'
                    d='M7.10303 6H7C7 3.23858 9.23858 1 12 1C14.7614 1 17 3.23858 17 6H16.897C17.4001 6.00005 17.8362 6.0015 18.1983 6.03158C18.6002 6.06495 18.9997 6.13867 19.3829 6.33776C19.9309 6.62239 20.3776 7.06915 20.6622 7.61708C20.8613 8.00034 20.935 8.39981 20.9684 8.8017C21 9.18235 21 9.64473 21 10.1807V13.6035C21 14.7055 21 15.5945 20.9403 16.3138C20.8788 17.0547 20.7487 17.7049 20.4371 18.3049C19.9627 19.2181 19.2181 19.9627 18.3049 20.4371C17.7049 20.7487 17.0547 20.8788 16.3138 20.9403C15.5944 21 14.7056 21 13.6036 21H10.3964C9.29441 21 8.40556 21 7.68616 20.9403C6.94535 20.8788 6.29514 20.7487 5.69513 20.4371C4.78191 19.9627 4.03731 19.2181 3.56293 18.3049C3.25126 17.7049 3.12125 17.0547 3.05973 16.3138C2.99998 15.5944 2.99999 14.7056 3 13.6035L3 10.1808C2.99998 9.64478 2.99997 9.18237 3.03158 8.8017C3.06495 8.39981 3.13867 8.00034 3.33776 7.61708C3.62239 7.06915 4.06915 6.62239 4.61708 6.33776C5.00035 6.13867 5.39982 6.06495 5.8017 6.03158C6.16384 6.0015 6.59995 6.00005 7.10303 6ZM9 6C9 4.34315 10.3431 3 12 3C13.6569 3 15 4.34315 15 6H9ZM5.53903 8.11259C5.58924 8.0865 5.69125 8.04763 5.96722 8.02472C6.25517 8.0008 6.63373 8 7.22 8H16.78C17.3663 8 17.7448 8.0008 18.0328 8.02472C18.3088 8.04763 18.4108 8.0865 18.461 8.11259C18.6436 8.20746 18.7925 8.35638 18.8874 8.53903C18.9135 8.58924 18.9524 8.69125 18.9753 8.96722C18.9992 9.25517 19 9.63372 19 10.22V13.56C19 14.7158 18.9992 15.5214 18.9471 16.1483C18.8961 16.7632 18.8009 17.116 18.6622 17.3829C18.3776 17.9309 17.9309 18.3776 17.3829 18.6622C17.116 18.8009 16.7632 18.8961 16.1483 18.9471C15.5214 18.9992 14.7158 19 13.56 19H10.44C9.28424 19 8.47856 18.9992 7.85169 18.9471C7.23678 18.8961 6.88403 18.8009 6.61708 18.6622C6.06915 18.3776 5.62239 17.9309 5.33776 17.3829C5.19909 17.116 5.10393 16.7632 5.05286 16.1483C5.00081 15.5214 5 14.7158 5 13.56V10.22C5 9.63372 5.00081 9.25517 5.02472 8.96722C5.04764 8.69125 5.08651 8.58924 5.11259 8.53903C5.20746 8.35638 5.35638 8.20746 5.53903 8.11259Z'
                    fill='#186F65'
                />
            </svg>
        ),
    },
    [paths.Search]: {
        label: 'Tìm kiếm',
        icon: (
            <svg
                width='24px'
                height='24px'
                viewBox='0 0 24 24'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
            >
                <path
                    d='M16.6725 16.6412L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z'
                    stroke='#919EAB'
                    stroke-width='2'
                    stroke-linecap='round'
                    stroke-linejoin='round'
                />
            </svg>
        ),
        activeIcon: (
            <svg
                width='24px'
                height='24px'
                viewBox='0 0 24 24'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
            >
                <path
                    d='M16.6725 16.6412L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z'
                    stroke='#186F65'
                    stroke-width='2'
                    stroke-linecap='round'
                    stroke-linejoin='round'
                />
            </svg>
        ),
    },
    [paths.Cart]: {
        label: 'Giỏ hàng',
        icon: (
            <svg
                width='24px'
                height='24px'
                viewBox='0 0 24 24'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
            >
                <path
                    fillRule='evenodd'
                    clipRule='evenodd'
                    d='M1 3C1 2.44772 1.44772 2 2 2C3.62481 2 5.06733 3.03971 5.58114 4.58114L5.72076 5L18.03 5C18.6859 4.99998 19.2437 4.99996 19.6951 5.04029C20.165 5.08226 20.6347 5.17512 21.064 5.43584C21.6667 5.80183 22.1211 6.36838 22.3477 7.03605C22.5091 7.51168 22.4978 7.99036 22.4369 8.45816C22.3783 8.90755 22.2573 9.45209 22.115 10.0924L21.8088 11.4704C21.664 12.1218 21.5435 12.6641 21.4106 13.1043C21.2716 13.5649 21.1006 13.9803 20.8231 14.36C20.4058 14.931 19.8446 15.3812 19.1967 15.6646C18.7658 15.8532 18.3232 15.93 17.8434 15.9658C17.3849 16 16.8295 16 16.1621 16H10.8379C10.1705 16 9.61512 16 9.15656 15.9658C8.67678 15.93 8.23421 15.8532 7.80328 15.6646C7.15536 15.3812 6.59418 14.931 6.17692 14.36C5.89941 13.9803 5.72844 13.5649 5.58939 13.1043C5.45649 12.6641 5.33602 12.1219 5.19125 11.4704L4.035 6.26729L3.68377 5.21359C3.44219 4.48885 2.76395 4 2 4C1.44772 4 1 3.55228 1 3ZM6.24662 7L7.13569 11.0008C7.29042 11.6971 7.39528 12.166 7.50404 12.5263C7.60908 12.8742 7.69899 13.0531 7.79172 13.18C8.00035 13.4655 8.28094 13.6906 8.6049 13.8323C8.74888 13.8953 8.94301 13.9443 9.30546 13.9713C9.68076 13.9994 10.1612 14 10.8745 14H16.1255C16.8388 14 17.3192 13.9994 17.6945 13.9713C18.057 13.9443 18.2511 13.8953 18.3951 13.8323C18.7191 13.6906 18.9997 13.4655 19.2083 13.18C19.301 13.0531 19.3909 12.8742 19.496 12.5263C19.6047 12.166 19.7096 11.6971 19.8643 11.0008L20.153 9.70159C20.3075 9.00651 20.408 8.54985 20.4536 8.19974C20.4982 7.858 20.4722 7.73312 20.4537 7.67868C20.3782 7.45613 20.2267 7.26728 20.0259 7.14528C19.9767 7.11544 19.8605 7.06302 19.5172 7.03235C19.1655 7.00094 18.6979 7 17.9859 7H6.24662Z'
                    fill='#919EAB'
                />
                <path
                    d='M11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 17.8954 7.89543 17 9 17C10.1046 17 11 17.8954 11 19Z'
                    fill='#919EAB'
                />
                <path
                    d='M18 21C19.1046 21 20 20.1046 20 19C20 17.8954 19.1046 17 18 17C16.8954 17 16 17.8954 16 19C16 20.1046 16.8954 21 18 21Z'
                    fill='#919EAB'
                />
            </svg>
        ),
        activeIcon: (
            <svg
                width='24px'
                height='24px'
                viewBox='0 0 24 24'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
            >
                <path
                    fillRule='evenodd'
                    clipRule='evenodd'
                    d='M1 3C1 2.44772 1.44772 2 2 2C3.62481 2 5.06733 3.03971 5.58114 4.58114L5.72076 5L18.03 5C18.6859 4.99998 19.2437 4.99996 19.6951 5.04029C20.165 5.08226 20.6347 5.17512 21.064 5.43584C21.6667 5.80183 22.1211 6.36838 22.3477 7.03605C22.5091 7.51168 22.4978 7.99036 22.4369 8.45816C22.3783 8.90755 22.2573 9.45209 22.115 10.0924L21.8088 11.4704C21.664 12.1218 21.5435 12.6641 21.4106 13.1043C21.2716 13.5649 21.1006 13.9803 20.8231 14.36C20.4058 14.931 19.8446 15.3812 19.1967 15.6646C18.7658 15.8532 18.3232 15.93 17.8434 15.9658C17.3849 16 16.8295 16 16.1621 16H10.8379C10.1705 16 9.61512 16 9.15656 15.9658C8.67678 15.93 8.23421 15.8532 7.80328 15.6646C7.15536 15.3812 6.59418 14.931 6.17692 14.36C5.89941 13.9803 5.72844 13.5649 5.58939 13.1043C5.45649 12.6641 5.33602 12.1219 5.19125 11.4704L4.035 6.26729L3.68377 5.21359C3.44219 4.48885 2.76395 4 2 4C1.44772 4 1 3.55228 1 3ZM6.24662 7L7.13569 11.0008C7.29042 11.6971 7.39528 12.166 7.50404 12.5263C7.60908 12.8742 7.69899 13.0531 7.79172 13.18C8.00035 13.4655 8.28094 13.6906 8.6049 13.8323C8.74888 13.8953 8.94301 13.9443 9.30546 13.9713C9.68076 13.9994 10.1612 14 10.8745 14H16.1255C16.8388 14 17.3192 13.9994 17.6945 13.9713C18.057 13.9443 18.2511 13.8953 18.3951 13.8323C18.7191 13.6906 18.9997 13.4655 19.2083 13.18C19.301 13.0531 19.3909 12.8742 19.496 12.5263C19.6047 12.166 19.7096 11.6971 19.8643 11.0008L20.153 9.70159C20.3075 9.00651 20.408 8.54985 20.4536 8.19974C20.4982 7.858 20.4722 7.73312 20.4537 7.67868C20.3782 7.45613 20.2267 7.26728 20.0259 7.14528C19.9767 7.11544 19.8605 7.06302 19.5172 7.03235C19.1655 7.00094 18.6979 7 17.9859 7H6.24662Z'
                    fill='#186F65'
                />
                <path
                    d='M11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 17.8954 7.89543 17 9 17C10.1046 17 11 17.8954 11 19Z'
                    fill='#186F65'
                />
                <path
                    d='M18 21C19.1046 21 20 20.1046 20 19C20 17.8954 19.1046 17 18 17C16.8954 17 16 17.8954 16 19C16 20.1046 16.8954 21 18 21Z'
                    fill='#186F65'
                />
            </svg>
        ),
    },
    // [paths.Notification]: {
    //     label: 'Thông báo',
    //     icon: (
    //         <svg
    //             width='24px'
    //             height='24px'
    //             viewBox='0 0 24 24'
    //             fill='none'
    //             xmlns='http://www.w3.org/2000/svg'
    //         >
    //             <path
    //                 fillRule='evenodd'
    //                 clipRule='evenodd'
    //                 d='M12.1041 3C9.19982 3 6.9545 5.19595 6.9545 7.77444V10.2188C6.9545 10.5405 6.82228 10.8248 6.75338 10.9646C6.66384 11.1463 6.54677 11.339 6.42189 11.5279C6.17031 11.9084 5.83361 12.3536 5.47487 12.8035C5.01458 13.3809 4.91657 14.0494 5.0632 14.5627C5.20252 15.0504 5.56426 15.432 6.18153 15.5344C7.73816 15.7925 9.72824 16 12.1041 16C14.6551 16 16.6049 15.7608 18.0148 15.4803C18.5156 15.3806 18.8052 15.078 18.9304 14.6866C19.0641 14.2684 19.0172 13.7009 18.6805 13.1607C18.5187 12.9011 18.3448 12.6358 18.1696 12.3698C18.1517 12.3426 18.1337 12.3154 18.1158 12.2881C17.9607 12.0528 17.8045 11.8158 17.6653 11.5955C17.5119 11.3526 17.3627 11.1043 17.2493 10.8776C17.1607 10.7004 17 10.3623 17 10V7.71194C17 5.09322 14.9665 3 12.1041 3ZM4.9545 7.77444C4.9545 3.97465 8.21572 1 12.1041 1C16.0344 1 19 3.95238 19 7.71194V9.90173C19.0084 9.92117 19.0206 9.94809 19.0382 9.98326C19.1058 10.1185 19.212 10.2991 19.3562 10.5274C19.4843 10.7302 19.6294 10.9503 19.7865 11.1887C19.8041 11.2155 19.8219 11.2424 19.8398 11.2696C20.0148 11.5353 20.2013 11.8195 20.3779 12.1029C20.997 13.0963 21.1635 14.2698 20.8353 15.2959C20.4985 16.3489 19.6505 17.1941 18.4051 17.4418C16.8616 17.7489 14.7809 18 12.1041 18C9.61153 18 7.51187 17.7823 5.85433 17.5074C4.43291 17.2717 3.47981 16.3011 3.14013 15.1121C2.80778 13.9487 3.06663 12.6159 3.91105 11.5567C4.25624 11.1238 4.5503 10.7323 4.75351 10.4249C4.85168 10.2764 4.91666 10.1655 4.9545 10.0904V7.77444ZM4.98375 10.0249C4.98403 10.0248 4.98265 10.0291 4.97876 10.0385C4.98152 10.0297 4.98347 10.0251 4.98375 10.0249ZM15.7853 19.3808C16.1272 19.8145 16.0529 20.4433 15.6192 20.7852C13.578 22.3948 10.4432 22.4152 8.37995 20.7846C7.94666 20.4421 7.87301 19.8132 8.21546 19.3799C8.55791 18.9466 9.18678 18.873 9.62008 19.2154C10.9507 20.2671 13.0602 20.2561 14.3808 19.2148C14.8145 18.8728 15.4433 18.9471 15.7853 19.3808Z'
    //                 fill='#919EAB'
    //             />
    //         </svg>
    //     ),
    //     activeIcon: (
    //         <svg
    //             width='24px'
    //             height='24px'
    //             viewBox='0 0 24 24'
    //             fill='none'
    //             xmlns='http://www.w3.org/2000/svg'
    //         >
    //             <path
    //                 fillRule='evenodd'
    //                 clipRule='evenodd'
    //                 d='M12.1041 3C9.19982 3 6.9545 5.19595 6.9545 7.77444V10.2188C6.9545 10.5405 6.82228 10.8248 6.75338 10.9646C6.66384 11.1463 6.54677 11.339 6.42189 11.5279C6.17031 11.9084 5.83361 12.3536 5.47487 12.8035C5.01458 13.3809 4.91657 14.0494 5.0632 14.5627C5.20252 15.0504 5.56426 15.432 6.18153 15.5344C7.73816 15.7925 9.72824 16 12.1041 16C14.6551 16 16.6049 15.7608 18.0148 15.4803C18.5156 15.3806 18.8052 15.078 18.9304 14.6866C19.0641 14.2684 19.0172 13.7009 18.6805 13.1607C18.5187 12.9011 18.3448 12.6358 18.1696 12.3698C18.1517 12.3426 18.1337 12.3154 18.1158 12.2881C17.9607 12.0528 17.8045 11.8158 17.6653 11.5955C17.5119 11.3526 17.3627 11.1043 17.2493 10.8776C17.1607 10.7004 17 10.3623 17 10V7.71194C17 5.09322 14.9665 3 12.1041 3ZM4.9545 7.77444C4.9545 3.97465 8.21572 1 12.1041 1C16.0344 1 19 3.95238 19 7.71194V9.90173C19.0084 9.92117 19.0206 9.94809 19.0382 9.98326C19.1058 10.1185 19.212 10.2991 19.3562 10.5274C19.4843 10.7302 19.6294 10.9503 19.7865 11.1887C19.8041 11.2155 19.8219 11.2424 19.8398 11.2696C20.0148 11.5353 20.2013 11.8195 20.3779 12.1029C20.997 13.0963 21.1635 14.2698 20.8353 15.2959C20.4985 16.3489 19.6505 17.1941 18.4051 17.4418C16.8616 17.7489 14.7809 18 12.1041 18C9.61153 18 7.51187 17.7823 5.85433 17.5074C4.43291 17.2717 3.47981 16.3011 3.14013 15.1121C2.80778 13.9487 3.06663 12.6159 3.91105 11.5567C4.25624 11.1238 4.5503 10.7323 4.75351 10.4249C4.85168 10.2764 4.91666 10.1655 4.9545 10.0904V7.77444ZM4.98375 10.0249C4.98403 10.0248 4.98265 10.0291 4.97876 10.0385C4.98152 10.0297 4.98347 10.0251 4.98375 10.0249ZM15.7853 19.3808C16.1272 19.8145 16.0529 20.4433 15.6192 20.7852C13.578 22.3948 10.4432 22.4152 8.37995 20.7846C7.94666 20.4421 7.87301 19.8132 8.21546 19.3799C8.55791 18.9466 9.18678 18.873 9.62008 19.2154C10.9507 20.2671 13.0602 20.2561 14.3808 19.2148C14.8145 18.8728 15.4433 18.9471 15.7853 19.3808Z'
    //                 fill='#186F65'
    //             />
    //         </svg>
    //     ),
    // },
    // [paths.ListShop]: {
    //     label: 'Gian hàng',
    //     icon: (
    //         <svg
    //             fill='#919EAB'
    //             width='24px'
    //             height='24px'
    //             viewBox='0 0 24 24'
    //             xmlns='http://www.w3.org/2000/svg'
    //         >
    //             <g id='shop-search'>
    //                 <path d='M21.6167,9.0879l-1.4287-5A1.5067,1.5067,0,0,0,18.7456,3H5.2544A1.5067,1.5067,0,0,0,3.812,4.0879l-1.4287,5A1.5,1.5,0,0,0,3.8257,11H4v7.5A2.503,2.503,0,0,0,6.5,21h7a.5.5,0,0,0,0-1h-7A1.5017,1.5017,0,0,1,5,18.5V11H19v3.5a.5.5,0,0,0,1,0V11h.1743a1.5,1.5,0,0,0,1.4424-1.9121Zm-1.043.7134A.4969.4969,0,0,1,20.1743,10H3.8257a.4993.4993,0,0,1-.48-.6377l1.4287-5A.5011.5011,0,0,1,5.2544,4H18.7456a.5011.5011,0,0,1,.48.3623l1.4287,5A.4961.4961,0,0,1,20.5737,9.8013Z' />

    //                 <path d='M19.3535,19.6465l-1.77-1.77a2.5074,2.5074,0,1,0-.707.707l1.77,1.77a.5.5,0,0,0,.707-.707ZM14,16.5a1.5,1.5,0,1,1,2.5709,1.0471c-.0043.004-.01.0053-.0143.0095s-.0055.01-.0095.0143A1.4977,1.4977,0,0,1,14,16.5Z' />
    //             </g>
    //         </svg>
    //     ),
    //     activeIcon: (
    //         <svg
    //             fill='#186F65'
    //             width='24px'
    //             height='24px'
    //             viewBox='0 0 24 24'
    //             xmlns='http://www.w3.org/2000/svg'
    //         >
    //             <g id='shop-search'>
    //                 <path d='M21.6167,9.0879l-1.4287-5A1.5067,1.5067,0,0,0,18.7456,3H5.2544A1.5067,1.5067,0,0,0,3.812,4.0879l-1.4287,5A1.5,1.5,0,0,0,3.8257,11H4v7.5A2.503,2.503,0,0,0,6.5,21h7a.5.5,0,0,0,0-1h-7A1.5017,1.5017,0,0,1,5,18.5V11H19v3.5a.5.5,0,0,0,1,0V11h.1743a1.5,1.5,0,0,0,1.4424-1.9121Zm-1.043.7134A.4969.4969,0,0,1,20.1743,10H3.8257a.4993.4993,0,0,1-.48-.6377l1.4287-5A.5011.5011,0,0,1,5.2544,4H18.7456a.5011.5011,0,0,1,.48.3623l1.4287,5A.4961.4961,0,0,1,20.5737,9.8013Z' />

    //                 <path d='M19.3535,19.6465l-1.77-1.77a2.5074,2.5074,0,1,0-.707.707l1.77,1.77a.5.5,0,0,0,.707-.707ZM14,16.5a1.5,1.5,0,1,1,2.5709,1.0471c-.0043.004-.01.0053-.0143.0095s-.0055.01-.0095.0143A1.4977,1.4977,0,0,1,14,16.5Z' />
    //             </g>
    //         </svg>
    //     ),
    // },
    [paths.Profile]: {
        label: 'Cá nhân',
        icon: (
            <svg
                width='24px'
                height='24px'
                viewBox='0 0 24 24'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
            >
                <path
                    fillRule='evenodd'
                    clipRule='evenodd'
                    d='M12 5C10.3431 5 9 6.34315 9 8C9 9.65685 10.3431 11 12 11C13.6569 11 15 9.65685 15 8C15 6.34315 13.6569 5 12 5ZM7 8C7 5.23858 9.23858 3 12 3C14.7614 3 17 5.23858 17 8C17 10.7614 14.7614 13 12 13C9.23858 13 7 10.7614 7 8ZM7.45609 16.7264C6.40184 17.1946 6 17.7858 6 18.5C6 18.7236 6.03976 18.8502 6.09728 18.942C6.15483 19.0338 6.29214 19.1893 6.66219 19.3567C7.45312 19.7145 9.01609 20 12 20C14.9839 20 16.5469 19.7145 17.3378 19.3567C17.7079 19.1893 17.8452 19.0338 17.9027 18.942C17.9602 18.8502 18 18.7236 18 18.5C18 17.7858 17.5982 17.1946 16.5439 16.7264C15.4614 16.2458 13.8722 16 12 16C10.1278 16 8.53857 16.2458 7.45609 16.7264ZM6.64442 14.8986C8.09544 14.2542 10.0062 14 12 14C13.9938 14 15.9046 14.2542 17.3556 14.8986C18.8348 15.5554 20 16.7142 20 18.5C20 18.9667 19.9148 19.4978 19.5973 20.0043C19.2798 20.5106 18.7921 20.8939 18.1622 21.1789C16.9531 21.7259 15.0161 22 12 22C8.98391 22 7.04688 21.7259 5.83781 21.1789C5.20786 20.8939 4.72017 20.5106 4.40272 20.0043C4.08524 19.4978 4 18.9667 4 18.5C4 16.7142 5.16516 15.5554 6.64442 14.8986Z'
                    fill='#919EAB'
                />
            </svg>
        ),
        activeIcon: (
            <svg
                width='24px'
                height='24px'
                viewBox='0 0 24 24'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
            >
                <path
                    fillRule='evenodd'
                    clipRule='evenodd'
                    d='M12 5C10.3431 5 9 6.34315 9 8C9 9.65685 10.3431 11 12 11C13.6569 11 15 9.65685 15 8C15 6.34315 13.6569 5 12 5ZM7 8C7 5.23858 9.23858 3 12 3C14.7614 3 17 5.23858 17 8C17 10.7614 14.7614 13 12 13C9.23858 13 7 10.7614 7 8ZM7.45609 16.7264C6.40184 17.1946 6 17.7858 6 18.5C6 18.7236 6.03976 18.8502 6.09728 18.942C6.15483 19.0338 6.29214 19.1893 6.66219 19.3567C7.45312 19.7145 9.01609 20 12 20C14.9839 20 16.5469 19.7145 17.3378 19.3567C17.7079 19.1893 17.8452 19.0338 17.9027 18.942C17.9602 18.8502 18 18.7236 18 18.5C18 17.7858 17.5982 17.1946 16.5439 16.7264C15.4614 16.2458 13.8722 16 12 16C10.1278 16 8.53857 16.2458 7.45609 16.7264ZM6.64442 14.8986C8.09544 14.2542 10.0062 14 12 14C13.9938 14 15.9046 14.2542 17.3556 14.8986C18.8348 15.5554 20 16.7142 20 18.5C20 18.9667 19.9148 19.4978 19.5973 20.0043C19.2798 20.5106 18.7921 20.8939 18.1622 21.1789C16.9531 21.7259 15.0161 22 12 22C8.98391 22 7.04688 21.7259 5.83781 21.1789C5.20786 20.8939 4.72017 20.5106 4.40272 20.0043C4.08524 19.4978 4 18.9667 4 18.5C4 16.7142 5.16516 15.5554 6.64442 14.8986Z'
                    fill='#186F65'
                />
            </svg>
        ),
    },
};

export type TabKeys = keyof typeof tabs;

export const NO_BOTTOM_NAVIGATION_PAGES = routes.map((item) => {
    if (!item.bottomNavigation) {
        return item.path;
    } else {
        return undefined;
    }
});

export const Navigation: FC = () => {
    const [activeTab, setActiveTab] = useState<TabKeys>('/');
    const keyboardVisible = useVirtualKeyboardVisible();
    const { cart } = useContext(CartContext);
    const itemInCart = sumBy(cart.ListItem, (o) => o.Count);
    const navigate = useNavigate();
    const location = useLocation();

    const noBottomNav = useMemo(() => {
        return compact(NO_BOTTOM_NAVIGATION_PAGES).includes(location.pathname);
    }, [location]);

    if (noBottomNav || keyboardVisible) {
        return <></>;
    }
    return (
        <BottomNavigation
            id='footer'
            activeKey={activeTab}
            onChange={(key: TabKeys) => setActiveTab(key)}
            className='z-50 py-2 bg-white shadow-lg'
        >
            {Object.keys(tabs).map((path: TabKeys) => {
                if (path !== paths.Cart) {
                    return (
                        <BottomNavigation.Item
                            key={path}
                            label={tabs[path].label}
                            icon={tabs[path].icon}
                            activeIcon={tabs[path].activeIcon}
                            onClick={() => navigate(path)}
                        />
                    );
                }
                return (
                    <>
                        <BottomNavigation.Item
                            key={path}
                            label={tabs[path].label}
                            icon={
                                <div className='relative'>
                                    {tabs[path].icon}
                                    <div className='absolute top-[-4px]  right-[-12px] w-[16px] h-[16px] rounded-full bg-primary text-xs text-white'>
                                        {itemInCart}
                                    </div>
                                </div>
                            }
                            activeIcon={
                                <div className='relative'>
                                    {tabs[path].activeIcon}
                                    <div className='absolute top-[-4px]  right-[-12px] w-[16px] h-[16px] rounded-full bg-primary text-xs text-white'>
                                        {itemInCart}
                                    </div>
                                </div>
                            }
                            onClick={() => navigate(path)}
                        />
                    </>
                );
            })}
        </BottomNavigation>
    );
};
